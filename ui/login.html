<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        * { box-sizing: border-box; }

        :root {
            --bg-0: #030711;
            --bg-1: #060f1d;
            --bg-2: #081a2e;
            --line: rgba(95, 216, 255, 0.42);
            --line-soft: rgba(198, 239, 255, 0.15);
            --text: #ecf8ff;
            --text-soft: #91b4ca;
            --accent: #00bcff;
            --accent-2: #52ffe0;
            --danger: #ff6677;
            --ok: #63ffb8;
        }

        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow: hidden;
        }

        body {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Bahnschrift", "Segoe UI", "Consolas", monospace;
            color: var(--text);
            isolation: isolate;
            background:
                radial-gradient(circle at 22% 16%, rgba(0, 168, 255, 0.3), transparent 36%),
                radial-gradient(circle at 84% 22%, rgba(0, 255, 204, 0.1), transparent 30%),
                radial-gradient(circle at 50% 82%, rgba(0, 157, 255, 0.14), transparent 40%),
                linear-gradient(160deg, var(--bg-0), var(--bg-1) 52%, var(--bg-0));
        }

        body::before {
            content: "";
            position: absolute;
            inset: -30%;
            background:
                radial-gradient(1px 1px at 12% 18%, rgba(255, 255, 255, 0.82), transparent 50%),
                radial-gradient(1px 1px at 26% 72%, rgba(127, 215, 255, 0.68), transparent 50%),
                radial-gradient(1px 1px at 66% 27%, rgba(98, 206, 255, 0.72), transparent 50%),
                radial-gradient(1px 1px at 79% 64%, rgba(173, 225, 255, 0.55), transparent 50%),
                radial-gradient(1px 1px at 48% 44%, rgba(255, 255, 255, 0.62), transparent 50%);
            opacity: 0.95;
            animation: driftStars 42s linear infinite;
            pointer-events: none;
        }

        body::after {
            content: "";
            position: absolute;
            inset: -15%;
            background:
                repeating-linear-gradient(
                    to right,
                    rgba(255, 255, 255, 0.03) 0,
                    rgba(255, 255, 255, 0.03) 1px,
                    transparent 1px,
                    transparent 72px
                ),
                repeating-linear-gradient(
                    to bottom,
                    rgba(255, 255, 255, 0.02) 0,
                    rgba(255, 255, 255, 0.02) 1px,
                    transparent 1px,
                    transparent 72px
                );
            opacity: 0.23;
            transform: perspective(900px) rotateX(68deg) translateY(28%);
            animation: driftGrid 26s linear infinite;
            pointer-events: none;
        }

        .flow-depth {
            position: absolute;
            inset: -25%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.78;
            transform-origin: 50% 100%;
            transform: perspective(1300px) rotateX(72deg) translateY(34%) scale(1.25);
            background:
                radial-gradient(120% 70% at 50% 110%, rgba(0, 142, 235, 0.56), transparent 62%),
                conic-gradient(from 180deg at 50% 82%, rgba(0, 192, 255, 0.28), rgba(80, 255, 226, 0.12), rgba(0, 176, 255, 0.26), rgba(0, 192, 255, 0.28));
            filter: blur(20px) saturate(1.08);
            animation: flowPerspective 18s ease-in-out infinite alternate;
        }

        .flow-depth::before {
            content: "";
            position: absolute;
            inset: -14%;
            background:
                linear-gradient(92deg, transparent 12%, rgba(132, 225, 255, 0.12) 36%, transparent 55%),
                linear-gradient(112deg, transparent 26%, rgba(83, 255, 224, 0.12) 52%, transparent 76%);
            filter: blur(16px);
            animation: flowSweep 9s ease-in-out infinite;
        }

        .scene-shell {
            position: relative;
            width: min(94vw, 500px);
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            animation: rise 820ms cubic-bezier(0.2, 0.9, 0.2, 1);
        }

        .brand {
            position: relative;
            text-align: center;
            padding: 12px 28px 18px;
        }

        .brand::before {
            content: "";
            position: absolute;
            left: 8%;
            right: 8%;
            bottom: 4px;
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, rgba(0, 188, 255, 0.8) 50%, transparent 100%);
            box-shadow: 0 0 20px rgba(0, 188, 255, 0.32);
        }

        .brand-mark {
            width: 72px;
            height: 72px;
            margin: 0 auto 8px;
            border: 1px solid rgba(0, 188, 255, 0.55);
            border-radius: 18px;
            background: linear-gradient(155deg, rgba(9, 23, 42, 0.92), rgba(8, 16, 29, 0.72));
            display: grid;
            place-items: center;
            box-shadow: inset 0 0 32px rgba(0, 188, 255, 0.16), 0 0 28px rgba(0, 188, 255, 0.16);
            animation: floatY 3.2s ease-in-out infinite;
        }

        .brand-mark svg {
            width: 38px;
            height: 38px;
            stroke: #8fdfff;
            stroke-width: 1.8;
            fill: none;
            filter: drop-shadow(0 0 8px rgba(0, 188, 255, 0.48));
        }

        .brand-title {
            font-size: clamp(42px, 7vw, 64px);
            letter-spacing: 3px;
            text-transform: uppercase;
            font-weight: 700;
            line-height: 1;
            color: #f4fbff;
            text-shadow: 0 0 24px rgba(0, 188, 255, 0.45);
        }

        .brand-sub {
            margin-top: 7px;
            font-size: 12px;
            letter-spacing: 4px;
            color: #79d6ff;
            text-transform: uppercase;
            opacity: 0.9;
        }

        .panel {
            width: 100%;
            border: 1px solid var(--line);
            background:
                linear-gradient(150deg, rgba(6, 19, 34, 0.95), rgba(6, 13, 25, 0.9)),
                linear-gradient(45deg, rgba(0, 188, 255, 0.09), transparent 45%);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.55), 0 0 44px rgba(0, 188, 255, 0.14);
            position: relative;
            overflow: hidden;
            padding: 20px 22px 18px;
        }

        .panel::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.09) 46%, transparent 70%);
            transform: translateX(-120%);
            animation: sweep 8.5s ease-in-out infinite;
            pointer-events: none;
        }

        .panel::after {
            content: "";
            position: absolute;
            inset: 10px;
            border: 1px solid var(--line-soft);
            pointer-events: none;
        }

        .field {
            margin-bottom: 14px;
        }

        .field-label {
            display: block;
            margin-bottom: 7px;
            font-size: 10px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--text-soft);
        }

        .input-wrap {
            display: grid;
            grid-template-columns: 38px 1fr 38px;
            align-items: center;
            border: 1px solid rgba(178, 236, 255, 0.18);
            background: linear-gradient(160deg, rgba(2, 10, 20, 0.82), rgba(4, 14, 24, 0.92));
            min-height: 46px;
            transition: border-color 160ms ease, box-shadow 160ms ease, transform 160ms ease;
        }

        .input-wrap:focus-within {
            border-color: rgba(0, 188, 255, 0.7);
            box-shadow: 0 0 18px rgba(0, 188, 255, 0.2);
            transform: translateY(-1px);
        }

        .icon-slot {
            display: grid;
            place-items: center;
        }

        .icon-slot svg,
        .toggle-pass svg {
            width: 18px;
            height: 18px;
            stroke: #8ad9ff;
            stroke-width: 1.8;
            fill: none;
            opacity: 0.82;
        }

        .input-wrap input {
            width: 100%;
            border: none;
            outline: none;
            background: transparent;
            color: var(--text);
            font-size: 15px;
            letter-spacing: 0.4px;
            font-family: inherit;
        }

        .input-wrap input::placeholder {
            color: rgba(175, 210, 228, 0.46);
        }

        .toggle-pass {
            border: 0;
            background: transparent;
            height: 100%;
            width: 100%;
            cursor: pointer;
            display: grid;
            place-items: center;
        }

        .toggle-pass:hover svg {
            opacity: 1;
            stroke: #c6efff;
        }

        .options {
            display: flex;
            gap: 8px;
            justify-content: space-between;
            margin-top: 3px;
            margin-bottom: 15px;
        }

        .save-opt {
            display: inline-flex;
            align-items: center;
            gap: 7px;
            font-size: 11px;
            color: var(--text-soft);
            user-select: none;
            cursor: pointer;
        }

        .save-opt input {
            width: 14px;
            height: 14px;
            accent-color: var(--accent);
        }

        .action {
            width: 100%;
            height: 49px;
            border: 1px solid rgba(0, 188, 255, 0.8);
            background:
                linear-gradient(150deg, rgba(0, 188, 255, 0.4), rgba(0, 188, 255, 0.18) 60%, rgba(76, 255, 229, 0.22)),
                linear-gradient(90deg, rgba(255, 255, 255, 0.14), transparent 35%);
            color: #f8fdff;
            font-size: 15px;
            letter-spacing: 5px;
            text-transform: uppercase;
            font-family: inherit;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: transform 150ms ease, filter 150ms ease, box-shadow 150ms ease;
            box-shadow: 0 0 26px rgba(0, 188, 255, 0.24);
            position: relative;
            overflow: hidden;
        }

        .action:disabled {
            cursor: wait;
            filter: saturate(0.82);
        }

        .action::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(110deg, transparent 0%, rgba(255, 255, 255, 0.5) 49%, transparent 62%);
            transform: translateX(-120%);
            transition: transform 350ms ease;
        }

        .action:hover {
            transform: translateY(-1px);
            filter: brightness(1.06);
            box-shadow: 0 0 32px rgba(0, 188, 255, 0.36);
        }

        .action:hover::before {
            transform: translateX(130%);
        }

        .action:active {
            transform: translateY(0);
        }

        .action-label {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 240px;
        }

        .action svg {
            width: 19px;
            height: 19px;
            stroke: #f0fbff;
            stroke-width: 2;
            fill: none;
        }

        .action-arrow {
            opacity: 1;
            transform: translateX(0);
            transition: opacity 160ms ease, transform 160ms ease;
        }

        .action-spinner {
            position: absolute;
            right: 16px;
            width: 18px;
            height: 18px;
            opacity: 0;
            transition: opacity 160ms ease;
            pointer-events: none;
            animation: spin 760ms linear infinite;
            animation-play-state: paused;
        }

        .action[data-busy="true"] .action-spinner {
            opacity: 1;
            animation-play-state: running;
        }

        .action[data-busy="true"] .action-arrow {
            opacity: 0;
            transform: translateX(5px);
        }

        .register-row {
            margin-top: 12px;
            text-align: center;
            font-size: 11px;
            color: var(--text-soft);
            letter-spacing: 0.6px;
            line-height: 1.35;
        }

        .status {
            min-height: 18px;
            margin-top: 13px;
            text-align: center;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--text-soft);
            transition: color 150ms ease;
        }

        .status.ok { color: var(--ok); }
        .status.err { color: var(--danger); }
        .status.pending { color: var(--accent); }

        @keyframes sweep {
            0% { transform: translateX(-125%); }
            45% { transform: translateX(120%); }
            100% { transform: translateX(120%); }
        }

        @keyframes driftStars {
            0% { transform: translate3d(0, 0, 0) scale(1); }
            100% { transform: translate3d(-120px, -80px, 0) scale(1.03); }
        }

        @keyframes driftGrid {
            0% { transform: perspective(900px) rotateX(68deg) translateY(28%) translateX(0); }
            100% { transform: perspective(900px) rotateX(68deg) translateY(28%) translateX(72px); }
        }

        @keyframes flowPerspective {
            0% { transform: perspective(1300px) rotateX(72deg) translateY(34%) scale(1.25) translateX(-6%); opacity: 0.7; }
            50% { transform: perspective(1300px) rotateX(71deg) translateY(32%) scale(1.28) translateX(4%); opacity: 0.84; }
            100% { transform: perspective(1300px) rotateX(73deg) translateY(36%) scale(1.24) translateX(11%); opacity: 0.72; }
        }

        @keyframes flowSweep {
            0% { transform: translateX(-10%) translateY(2%); opacity: 0.5; }
            50% { transform: translateX(8%) translateY(-1%); opacity: 0.82; }
            100% { transform: translateX(14%) translateY(0%); opacity: 0.4; }
        }

        @keyframes floatY {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes rise {
            from { opacity: 0; transform: translateY(18px) scale(0.985); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @media (max-width: 720px) {
            .scene-shell {
                width: min(95vw, 440px);
                gap: 16px;
            }

            .brand-title {
                font-size: clamp(34px, 11vw, 48px);
            }

            .brand-sub {
                letter-spacing: 3px;
                font-size: 11px;
            }

            .panel {
                padding: 16px 14px 14px;
            }

            .options {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }
        }
    </style>
</head>
<body>
    <div class="flow-depth" aria-hidden="true"></div>
    <div class="scene-shell">
        <div class="brand">
            <div class="brand-mark">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M12 3 4 7v6c0 5.2 3.2 7.8 8 9 4.8-1.2 8-3.8 8-9V7l-8-4Z"></path>
                    <path d="m9.5 12 1.8 1.8 3.4-3.4"></path>
                </svg>
            </div>
            <div class="brand-title">OpenGunZ</div>
            <div class="brand-sub">Terminal de Acesso NDG</div>
        </div>

        <div class="panel">
            <div class="field">
                <label class="field-label" for="l-user">Identificador</label>
                <div class="input-wrap">
                    <div class="icon-slot" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="8" r="4"></circle>
                            <path d="M4 20a8 8 0 0 1 16 0"></path>
                        </svg>
                    </div>
                    <input type="text" id="l-user" placeholder="E-MAIL" spellcheck="false" autocomplete="username">
                    <div></div>
                </div>
            </div>

            <div class="field">
                <label class="field-label" for="l-pass">Senha</label>
                <div class="input-wrap">
                    <div class="icon-slot" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <rect x="4" y="11" width="16" height="10" rx="2"></rect>
                            <path d="M8 11V8a4 4 0 0 1 8 0v3"></path>
                        </svg>
                    </div>
                    <input type="password" id="l-pass" placeholder="********" autocomplete="current-password">
                    <button id="toggle-pass" type="button" class="toggle-pass" aria-label="Mostrar senha">
                        <svg viewBox="0 0 24 24" id="eye-icon">
                            <path d="M2 12s3.8-6 10-6 10 6 10 6-3.8 6-10 6-10-6-10-6Z"></path>
                            <circle cx="12" cy="12" r="2.7"></circle>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="options">
                <label class="save-opt">
                    <input type="checkbox" id="save-user">
                    <span>Salvar E-mail</span>
                </label>
                <label class="save-opt">
                    <input type="checkbox" id="save-pass">
                    <span>Salvar Senha</span>
                </label>
            </div>

            <button type="button" id="login-btn" class="action" onclick="handleLogin()">
                <span class="action-label">LOGIN E REGISTRO*</span>
                <svg class="action-arrow" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M5 12h14"></path>
                    <path d="m13 6 6 6-6 6"></path>
                </svg>
                <svg class="action-spinner" viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="12" cy="12" r="8" stroke-dasharray="36 16"></circle>
                </svg>
            </button>

            <div class="register-row">* : ao clicar em registrar voce aceita os termos ...</div>

            <div id="status" class="status">Terminal Pronto.</div>
        </div>
    </div>

    <script>
        const PASS_EYE = {
            visible: '<path d="M2 12s3.8-6 10-6 10 6 10 6-3.8 6-10 6-10-6-10-6Z"></path><circle cx="12" cy="12" r="2.7"></circle>',
            hidden: '<path d="M3 3 21 21"></path><path d="M10.7 6.3A10.7 10.7 0 0 1 12 6c6.2 0 10 6 10 6a16 16 0 0 1-4 4.5"></path><path d="M6.7 6.7A16.2 16.2 0 0 0 2 12s3.8 6 10 6c1.7 0 3.2-.3 4.5-.9"></path><path d="M10 10a2.8 2.8 0 0 0 4 4"></path>'
        };
        let loginInFlight = false;
        let loginWatchdog = null;

        function clearLoginWatchdog() {
            if (loginWatchdog !== null) {
                clearTimeout(loginWatchdog);
                loginWatchdog = null;
            }
        }

        function armLoginWatchdog() {
            clearLoginWatchdog();
            loginWatchdog = setTimeout(() => {
                if (!loginInFlight) return;
                setLoginBusy(false);
                setStatus('Falha de conexao com o servidor (timeout).', 'err');
            }, 35000);
        }

        function setLoginBusy(busy) {
            loginInFlight = !!busy;
            if (!loginInFlight) clearLoginWatchdog();
            const btn = document.getElementById('login-btn');
            if (btn) {
                btn.disabled = loginInFlight;
                btn.dataset.busy = loginInFlight ? 'true' : 'false';
                btn.setAttribute('aria-busy', loginInFlight ? 'true' : 'false');
                const label = btn.querySelector('.action-label');
                if (label) label.textContent = loginInFlight ? 'CONECTANDO...' : 'LOGIN E REGISTRO*';
            }
        }

        function normalizeStatusText(text) {
            return String(text || '').trim().toUpperCase();
        }

        function setStatus(text, tone) {
            const el = document.getElementById('status');
            el.className = 'status';
            if (tone) el.classList.add(tone);
            el.textContent = normalizeStatusText(text || 'Terminal Pronto.');
        }

        function persistCredentials(user, pass) {
            if (document.getElementById('save-user').checked) localStorage.setItem('og_user', user);
            else localStorage.removeItem('og_user');

            if (document.getElementById('save-pass').checked) localStorage.setItem('og_pass', pass);
            else localStorage.removeItem('og_pass');
        }

        function handleLogin() {
            if (loginInFlight) return;
            const user = String(document.getElementById('l-user').value || '').trim();
            const pass = String(document.getElementById('l-pass').value || '');
            if (!user || !pass) {
                setStatus('Erro: Campos Vazios', 'err');
                return;
            }

            persistCredentials(user, pass);
            setStatus('Autenticando...', 'pending');
            if (window.login) {
                setLoginBusy(true);
                armLoginWatchdog();
                login(user, pass);
            } else {
                setLoginBusy(false);
                setStatus('Bridge de login indisponivel.', 'err');
            }
        }

        function setupPassToggle() {
            const passInput = document.getElementById('l-pass');
            const eyeIcon = document.getElementById('eye-icon');
            const toggle = document.getElementById('toggle-pass');
            let visible = false;

            toggle.addEventListener('click', () => {
                visible = !visible;
                passInput.type = visible ? 'text' : 'password';
                eyeIcon.innerHTML = visible ? PASS_EYE.hidden : PASS_EYE.visible;
            });
        }

        function setupHotkeys() {
            const userInput = document.getElementById('l-user');
            const passInput = document.getElementById('l-pass');

            function onKeyDown(event) {
                if (event.key !== 'Enter') return;
                event.preventDefault();
                handleLogin();
            }

            userInput.addEventListener('keydown', onKeyDown);
            passInput.addEventListener('keydown', onKeyDown);
        }

        function restoreLocalCredentials() {
            const savedUser = localStorage.getItem('og_user');
            const savedPass = localStorage.getItem('og_pass');

            if (savedUser) {
                document.getElementById('l-user').value = savedUser;
                document.getElementById('save-user').checked = true;
            }

            if (savedPass) {
                document.getElementById('l-pass').value = savedPass;
                document.getElementById('save-pass').checked = true;
            }
        }

        window.onload = () => {
            restoreLocalCredentials();
            setupPassToggle();
            setupHotkeys();
            setLoginBusy(false);
            setStatus('Terminal Pronto.');
        };

        window.setAuthStatus = (msg, success) => {
            setLoginBusy(false);
            setStatus(msg, success ? 'ok' : 'err');
        };
    </script>
</body>
</html>
